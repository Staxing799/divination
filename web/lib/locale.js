export const SUPPORTED_LANGUAGES = ['en', 'zh', 'es', 'ja'];

export function normalizeLanguage(input) {
  const value = (input || '').toLowerCase();
  if (value.startsWith('zh')) return 'zh';
  if (value.startsWith('es')) return 'es';
  if (value.startsWith('ja')) return 'ja';
  return 'en';
}

export const COPY = {
  en: {
    brandName: 'Nebula Arcana',
    brandTagline: 'Premium Divination Studio',
    heroTitle: 'Decode your next move with Tarot insight.',
    heroSubtitle:
      'Built for curious professionals, creators, and emotionally aware explorers who want reflective guidance with modern clarity.',
    heroAudience1: 'For creators',
    heroAudience2: 'For founders',
    heroAudience3: 'For deep feelers',
    heroCta: 'Start Free Reading',
    authPanelTitle: 'Secure Access',
    authHint: 'Create or enter your account to save your private reading history.',
    signIn: 'Sign In',
    signUp: 'Create Account',
    displayName: 'Display Name',
    email: 'Email',
    password: 'Password',
    logout: 'Logout',
    legalBadge: '18+ / Entertainment',
    legalNoticeEntertainment: 'For entertainment and self-reflection only.',
    legalNoticeAdvice: 'Not medical, legal, financial, or mental-health advice.',
    legalNoticeAdults: 'Intended for users aged 18 and above.',
    registerLegalTitle: 'Required legal acknowledgements',
    confirmAge18: 'I confirm that I am at least 18 years old.',
    confirmEntertainment: 'I understand this service is for entertainment and self-reflection.',
    confirmAdviceLimits: 'I understand this does not replace licensed professional advice.',
    authSuccess: 'Session activated.',
    dashboardTitle: 'Ritual Console',
    dashboardSubtitle:
      'Ask your question and receive a cinematic Tarot reading without payment friction.',
    readingType: 'Tarot',
    tarot: 'Tarot',
    tarotPosPAST: 'Past',
    tarotPosPRESENT: 'Present',
    tarotPosFUTURE: 'Future',
    tarotUpright: 'Upright',
    tarotReversed: 'Reversed',
    tarotShuffling: 'Shuffling the deck and revealing your spread...',
    eastern: 'Eastern Fate',
    iching: 'I Ching',
    questionLabel: 'What decision, tension, or opportunity do you want to decode?',
    birthDate: 'Birth Date',
    generateReading: 'Generate Reading',
    loading: 'Loading...',
    latestReading: 'Reading Output',
    emptyReading: 'Your next reading will appear here.',
    historyTitle: 'History',
    viewHistory: 'View',
    deleteHistory: 'Delete',
    clearHistory: 'Clear All',
    clearHistoryConfirm: 'Delete all history records?',
    noHistory: 'No records yet.',
    historyDeleted: 'History item removed.',
    historyCleared: '{{count}} records removed.',
    legalGateTitle: 'Legal Unlock Required',
    legalGateDesc: 'Confirm the required notices to unlock readings for this account.',
    legalGateAction: 'Confirm and Unlock',
    legalGateSaved: 'Legal acknowledgements saved.',
    legalGateNeededError: 'Complete legal acknowledgements before generating readings.',
    readGenerated: 'Reading generated.',
    questionTooShort: 'Please enter at least 3 characters for your question.',
    errorRequestFallback: 'Request failed. Please try again in a moment.',
    refresh: 'Refresh',
    footerLine: 'Private by design. International-ready. Free to use.',
    legalResultHint: 'Interpret this reading as reflective guidance, not professional advice.',
    localeLabel: 'Language'
  },
  zh: {
    brandName: 'Nebula Arcana 星象神谕',
    brandTagline: '高端占卜工作台',
    heroTitle: '用塔罗解码你的下一步。',
    heroSubtitle: '面向有审美、有判断力的年轻用户，用沉浸式体验提供可反思、可执行的洞察。',
    heroAudience1: '创意人群',
    heroAudience2: '创业者',
    heroAudience3: '高敏感用户',
    heroCta: '免费开始占卜',
    authPanelTitle: '安全访问',
    authHint: '登录或注册后可保存你的私人占卜历史。',
    signIn: '登录',
    signUp: '创建账号',
    displayName: '昵称',
    email: '邮箱',
    password: '密码',
    logout: '退出',
    legalBadge: '18+ / 仅娱乐',
    legalNoticeEntertainment: '本服务仅供娱乐与自我反思。',
    legalNoticeAdvice: '不构成医疗、法律、财务或心理健康专业建议。',
    legalNoticeAdults: '仅面向 18 岁及以上用户。',
    registerLegalTitle: '必选法律确认',
    confirmAge18: '我确认已满 18 周岁。',
    confirmEntertainment: '我理解本服务仅用于娱乐与自我反思。',
    confirmAdviceLimits: '我理解本服务不能替代持证专业人士建议。',
    authSuccess: '会话已激活。',
    dashboardTitle: '仪式控制台',
    dashboardSubtitle: '输入问题，即刻获得高质量塔罗解读。',
    readingType: '塔罗',
    tarot: '塔罗',
    tarotPosPAST: '过去',
    tarotPosPRESENT: '现在',
    tarotPosFUTURE: '未来',
    tarotUpright: '正位',
    tarotReversed: '逆位',
    tarotShuffling: '正在洗牌并揭示你的牌阵...',
    eastern: '东方命理',
    iching: '易经',
    questionLabel: '你想解码的决策、冲突或机会是什么？',
    birthDate: '出生日期',
    generateReading: '生成占卜',
    loading: '处理中...',
    latestReading: '占卜结果',
    emptyReading: '下一次占卜结果会显示在这里。',
    historyTitle: '历史记录',
    viewHistory: '查看',
    deleteHistory: '删除',
    clearHistory: '清空全部',
    clearHistoryConfirm: '确认删除全部历史记录？',
    noHistory: '暂无历史记录。',
    historyDeleted: '已删除历史记录。',
    historyCleared: '已删除 {{count}} 条记录。',
    legalGateTitle: '需完成法律确认',
    legalGateDesc: '请先确认必要提示，才能开启占卜功能。',
    legalGateAction: '确认并解锁',
    legalGateSaved: '法律确认已保存。',
    legalGateNeededError: '请先完成法律确认再进行占卜。',
    readGenerated: '占卜已生成。',
    questionTooShort: '问题至少输入 3 个字符。',
    errorRequestFallback: '请求失败，请稍后重试。',
    refresh: '刷新',
    footerLine: '隐私优先，国际化就绪，永久免费使用。',
    legalResultHint: '请将结果用于自我反思，不应替代专业意见。',
    localeLabel: '语言'
  },
  es: {
    brandName: 'Nebula Arcana',
    brandTagline: 'Estudio de Divinacion Premium',
    heroTitle: 'Descifra tu siguiente paso con Tarot.',
    heroSubtitle:
      'Disenado para profesionales curiosos, creadores y exploradores emocionales que buscan claridad moderna.',
    heroAudience1: 'Creadores',
    heroAudience2: 'Fundadores',
    heroAudience3: 'Personas sensibles',
    heroCta: 'Comenzar Gratis',
    authPanelTitle: 'Acceso Seguro',
    authHint: 'Crea o ingresa a tu cuenta para guardar tu historial privado.',
    signIn: 'Entrar',
    signUp: 'Crear Cuenta',
    displayName: 'Nombre',
    email: 'Correo',
    password: 'Contrasena',
    logout: 'Salir',
    legalBadge: '18+ / Entretenimiento',
    legalNoticeEntertainment: 'Solo para entretenimiento y auto-reflexion.',
    legalNoticeAdvice: 'No es asesoramiento medico, legal, financiero ni de salud mental.',
    legalNoticeAdults: 'Dirigido a usuarios de 18 anos o mas.',
    registerLegalTitle: 'Confirmaciones legales obligatorias',
    confirmAge18: 'Confirmo que tengo al menos 18 anos.',
    confirmEntertainment: 'Entiendo que este servicio es para entretenimiento y auto-reflexion.',
    confirmAdviceLimits: 'Entiendo que no reemplaza asesoria profesional con licencia.',
    authSuccess: 'Sesion activada.',
    dashboardTitle: 'Consola Ritual',
    dashboardSubtitle: 'Haz tu pregunta y recibe una lectura de Tarot cinematica sin friccion de pago.',
    readingType: 'Tarot',
    tarot: 'Tarot',
    tarotPosPAST: 'Pasado',
    tarotPosPRESENT: 'Presente',
    tarotPosFUTURE: 'Futuro',
    tarotUpright: 'Derecha',
    tarotReversed: 'Invertida',
    tarotShuffling: 'Barajando y revelando tu tirada...',
    eastern: 'Destino Oriental',
    iching: 'I Ching',
    questionLabel: 'Que decision, tension u oportunidad deseas descifrar?',
    birthDate: 'Fecha de nacimiento',
    generateReading: 'Generar Lectura',
    loading: 'Cargando...',
    latestReading: 'Resultado',
    emptyReading: 'Tu proxima lectura aparecera aqui.',
    historyTitle: 'Historial',
    viewHistory: 'Ver',
    deleteHistory: 'Eliminar',
    clearHistory: 'Limpiar Todo',
    clearHistoryConfirm: 'Eliminar todos los registros?',
    noHistory: 'Sin registros.',
    historyDeleted: 'Registro eliminado.',
    historyCleared: '{{count}} registros eliminados.',
    legalGateTitle: 'Confirmacion Legal Requerida',
    legalGateDesc: 'Confirma los avisos para habilitar lecturas en esta cuenta.',
    legalGateAction: 'Confirmar y Habilitar',
    legalGateSaved: 'Confirmaciones legales guardadas.',
    legalGateNeededError: 'Completa las confirmaciones legales antes de generar lecturas.',
    readGenerated: 'Lectura generada.',
    questionTooShort: 'Ingresa al menos 3 caracteres en tu pregunta.',
    errorRequestFallback: 'La solicitud fallo. Intenta nuevamente en unos momentos.',
    refresh: 'Actualizar',
    footerLine: 'Privado por diseno. Listo para mercado global. Uso gratuito.',
    legalResultHint: 'Interpreta esta lectura como guia reflexiva, no como asesoria profesional.',
    localeLabel: 'Idioma'
  },
  ja: {
    brandName: 'Nebula Arcana',
    brandTagline: 'プレミアム占術スタジオ',
    heroTitle: 'タロットで、次の一手を解読する。',
    heroSubtitle:
      '感性と判断力を持つユーザー向けに、現代的で洗練されたリフレクション体験を提供します。',
    heroAudience1: 'クリエイター向け',
    heroAudience2: '起業家向け',
    heroAudience3: '感受性の高い人向け',
    heroCta: '無料で開始',
    authPanelTitle: 'セキュアアクセス',
    authHint: 'アカウントでログインすると鑑定履歴を保存できます。',
    signIn: 'ログイン',
    signUp: '新規登録',
    displayName: '表示名',
    email: 'メール',
    password: 'パスワード',
    logout: 'ログアウト',
    legalBadge: '18+ / 娯楽用',
    legalNoticeEntertainment: '本サービスは娯楽と自己内省目的です。',
    legalNoticeAdvice: '医療・法律・金融・メンタルヘルスの専門助言ではありません。',
    legalNoticeAdults: '18歳以上のユーザー向けです。',
    registerLegalTitle: '必須の法的確認',
    confirmAge18: '私は18歳以上であることを確認します。',
    confirmEntertainment: '本サービスが娯楽と自己内省のためであることを理解しています。',
    confirmAdviceLimits: '有資格専門家の助言を代替しないことを理解しています。',
    authSuccess: 'セッションを開始しました。',
    dashboardTitle: 'リチュアルコンソール',
    dashboardSubtitle: '質問を入力し、支払いフリクションなしでタロット鑑定を受け取ります。',
    readingType: 'タロット',
    tarot: 'タロット',
    tarotPosPAST: '過去',
    tarotPosPRESENT: '現在',
    tarotPosFUTURE: '未来',
    tarotUpright: '正位置',
    tarotReversed: '逆位置',
    tarotShuffling: 'デッキをシャッフルしてスプレッドを展開中...',
    eastern: '東洋運勢',
    iching: '易経',
    questionLabel: '解読したい意思決定・葛藤・機会は何ですか？',
    birthDate: '生年月日',
    generateReading: '鑑定を生成',
    loading: '読み込み中...',
    latestReading: '鑑定結果',
    emptyReading: '次の鑑定結果がここに表示されます。',
    historyTitle: '履歴',
    viewHistory: '表示',
    deleteHistory: '削除',
    clearHistory: '全削除',
    clearHistoryConfirm: '履歴をすべて削除しますか？',
    noHistory: '履歴はまだありません。',
    historyDeleted: '履歴を削除しました。',
    historyCleared: '{{count}} 件の履歴を削除しました。',
    legalGateTitle: '法的確認が必要です',
    legalGateDesc: '鑑定を有効化するために必要な確認を完了してください。',
    legalGateAction: '確認して有効化',
    legalGateSaved: '法的確認を保存しました。',
    legalGateNeededError: '鑑定前に法的確認を完了してください。',
    readGenerated: '鑑定を生成しました。',
    questionTooShort: '質問は3文字以上で入力してください。',
    errorRequestFallback: 'リクエストに失敗しました。しばらくしてから再試行してください。',
    refresh: '更新',
    footerLine: 'プライバシー重視。グローバル対応。無料で利用可能。',
    legalResultHint: '結果は内省ガイドとして扱い、専門助言の代替にしないでください。',
    localeLabel: '言語'
  }
};

function interpolate(template, vars = {}) {
  return template.replace(/\{\{\s*(\w+)\s*\}\}/g, (_, key) => String(vars[key] ?? ''));
}

export function translate(language, key, vars) {
  const lang = COPY[language] ? language : 'en';
  const template = COPY[lang][key] || COPY.en[key] || key;
  return interpolate(template, vars);
}
